<div class="container">
  <app-user-info [userData]="userData$ | async"></app-user-info>

  <section class="calories-form">
    <h6 class="tui-text_h6">Calculate the recommended daily calorie intake</h6>
    <form
      class="calories-form__form"
      [formGroup]="dailyCaloriesForm"
      (ngSubmit)="onCalculate()"
    >
      <div class="calories-form__field">
        <label class="calories-form__label"> Goal: </label>
        <tui-select
          formControlName="goal"
          tuiTextfieldSize="m"
          class="calories-form__select"
          [tuiTextfieldLabelOutside]="true"
          [readOnly]="loading()"
        >
          <tui-data-list-wrapper
            *tuiDataList
            [items]="goals"
          ></tui-data-list-wrapper>
        </tui-select>
      </div>

      <div class="calories-form__field">
        <label class="calories-form__label"> Age: </label>
        <tui-input-number
          formControlName="age"
          tuiTextfieldSize="m"
          [tuiTextfieldCleaner]="!loading()"
          class="calories-form__select"
          [tuiTextfieldLabelOutside]="true"
          [readOnly]="loading()"
        >
        </tui-input-number>
      </div>

      <div class="calories-form__field">
        <label class="calories-form__label"> Gender: </label>
        <tui-select
          formControlName="gender"
          tuiTextfieldSize="m"
          class="calories-form__select"
          [tuiTextfieldLabelOutside]="true"
          [readOnly]="loading()"
        >
          <tui-data-list-wrapper
            *tuiDataList
            [items]="genders"
          ></tui-data-list-wrapper>
        </tui-select>
      </div>

      <div class="calories-form__field">
        <label class="calories-form__label"> Lifestyle: </label>
        <tui-select
          formControlName="lifestyle"
          tuiTextfieldSize="m"
          class="calories-form__select"
          [tuiTextfieldLabelOutside]="true"
          [readOnly]="loading()"
        >
          <tui-data-list-wrapper
            *tuiDataList
            [items]="lifestyles"
          ></tui-data-list-wrapper>
        </tui-select>
      </div>

      <div class="calories-form__field">
        <label class="calories-form__label"> Weight, kg: </label>
        <tui-input-number
          formControlName="weight"
          tuiTextfieldSize="m"
          [tuiTextfieldCleaner]="!loading()"
          class="calories-form__select"
          [tuiTextfieldLabelOutside]="true"
          [readOnly]="loading()"
        >
        </tui-input-number>
      </div>

      <div class="calories-form__field">
        <label class="calories-form__label"> Height, cm: </label>
        <tui-input-number
          formControlName="height"
          tuiTextfieldSize="m"
          [tuiTextfieldCleaner]="!loading()"
          class="calories-form__select"
          [tuiTextfieldLabelOutside]="true"
          [readOnly]="loading()"
        >
        </tui-input-number>
      </div>

      <button
        tuiButton
        type="submit"
        [showLoader]="loading()"
        [disabled]="loading() || !dailyCaloriesForm.valid"
      >
        Calculate
      </button>
    </form>
  </section>

  <section class="calories-result">
    <h6 class="tui-text_h6">Your daily calorie intake is</h6>
    <span class="calories-result__value">{{ caloriesMax || "-" }} kcal</span>
    <div class="calories-result__macronutrients">
      <div class="macronutrients-item">
        <p>Carbs:</p>
        <p>{{ carbsMax || "-" }}g</p>
      </div>
      <div class="macronutrients-item">
        <p>Protein:</p>
        <p>{{ proteinMax || "-" }}g</p>
      </div>
      <div class="macronutrients-item">
        <p>Fat:</p>
        <p>{{ fatMax || "-" }}g</p>
      </div>
    </div>
    <div class="calories-result__target">
      <p>Optimal weight: &nbsp;</p>
      <p class="calories-result__weight">{{ optimalWeight || "-" }} kg</p>
    </div>
  </section>
</div>
